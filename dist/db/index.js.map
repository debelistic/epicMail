{"version":3,"sources":["../../server/db/index.js"],"names":["dbURI","process","env","NODE_ENV","trim","TEST_DATABASE_URL","DATABASE_URL","pool","Pool","connectionString","query","text","params","Promise","resolve","reject","then","res","catch","err"],"mappings":";;;;;;;AAAA;;AACA;;AAEA;AAEA,IAAIA,KAAJ;;AAEA,IAAIC,OAAO,CAACC,GAAR,CAAYC,QAAZ,CAAqBC,IAArB,OAAgC,MAApC,EAA4C;AAC1CJ,EAAAA,KAAK,GAAGC,OAAO,CAACC,GAAR,CAAYG,iBAApB;AACD,CAFD,MAEO;AACLL,EAAAA,KAAK,GAAGC,OAAO,CAACC,GAAR,CAAYI,YAApB;AACD;;AAED,IAAMC,IAAI,GAAG,IAAIC,QAAJ,CAAS;AACpBC,EAAAA,gBAAgB,EAAET;AADE,CAAT,CAAb;eAIe;AACb;;;AAGAU,EAAAA,KAJa,iBAIPC,IAJO,EAIDC,MAJC,EAIO;AAClB,WAAO,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACtCR,MAAAA,IAAI,CAACG,KAAL,CAAWC,IAAX,EAAiBC,MAAjB,EACGI,IADH,CACQ,UAACC,GAAD,EAAS;AACbH,QAAAA,OAAO,CAACG,GAAD,CAAP;AACD,OAHH,EAIGC,KAJH,CAIS,UAACC,GAAD,EAAS;AACdJ,QAAAA,MAAM,CAACI,GAAD,CAAN;AACD,OANH;AAOD,KARM,CAAP;AASD;AAdY,C","sourcesContent":["import { Pool } from 'pg';\r\nimport { config } from 'dotenv';\r\n\r\nconfig();\r\n\r\nlet dbURI;\r\n\r\nif (process.env.NODE_ENV.trim() === 'test') {\r\n  dbURI = process.env.TEST_DATABASE_URL;\r\n} else {\r\n  dbURI = process.env.DATABASE_URL;\r\n}\r\n\r\nconst pool = new Pool({\r\n  connectionString: dbURI,\r\n});\r\n\r\nexport default {\r\n  /**\r\n     * db query\r\n     */\r\n  query(text, params) {\r\n    return new Promise((resolve, reject) => {\r\n      pool.query(text, params)\r\n        .then((res) => {\r\n          resolve(res);\r\n        })\r\n        .catch((err) => {\r\n          reject(err);\r\n        });\r\n    });\r\n  },\r\n};\r\n"],"file":"index.js"}